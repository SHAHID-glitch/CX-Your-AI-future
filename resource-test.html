<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Simple Resource Test</title>
    <!-- Test CSS loading -->
    <link href="style.css" rel="stylesheet">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .status { padding: 10px; margin: 5px; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>Resource Loading Test</h1>
    <div id="status"></div>
    
    <!-- Test Tesseract.js loading -->
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
    
    <!-- Test our main JS loading -->
    <script>
        const statusDiv = document.getElementById('status');
        
        function addStatus(message, isError = false) {
            const div = document.createElement('div');
            div.className = `status ${isError ? 'error' : 'success'}`;
            div.textContent = message;
            statusDiv.appendChild(div);
        }
        
        // Check if Tesseract loaded
        if (typeof Tesseract !== 'undefined') {
            addStatus('✅ Tesseract.js loaded successfully');
        } else {
            addStatus('❌ Tesseract.js failed to load', true);
        }
        
        // Test API endpoints
        fetch('/api/health')
            .then(response => response.json())
            .then(data => {
                addStatus('✅ Server API is responding');
            })
            .catch(error => {
                addStatus('❌ Server API failed: ' + error.message, true);
            });
        
        // Test OCR endpoints
        fetch('/api/ocr/languages')
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            })
            .then(data => {
                addStatus('✅ OCR API is working');
            })
            .catch(error => {
                addStatus('❌ OCR API failed: ' + error.message, true);
            });
        
        // Check CSS loading
        setTimeout(() => {
            const computed = window.getComputedStyle(document.body);
            if (computed.fontFamily.includes('Arial')) {
                addStatus('✅ Basic CSS loaded');
            } else {
                addStatus('❌ CSS loading issue detected', true);
            }
        }, 100);
        
        // Log any errors
        window.addEventListener('error', (event) => {
            addStatus(`❌ JavaScript Error: ${event.message} at line ${event.lineno}`, true);
        });
        
        window.addEventListener('unhandledrejection', (event) => {
            addStatus(`❌ Unhandled Promise Rejection: ${event.reason}`, true);
        });
    </script>
</body>
</html>